---
title: QR Code 教程
---

目录

- 简介
- 数据分析
- 数据编码
- 错误处理

## 简介

QR 码是一种特殊类型的条形码，可以编码像数字，字母和汉字字符等信息。 本教程是为希望学习如何编码 QR 码的程序员编写的。 编码过程很复杂，特别是在生成纠错码这一步。

QR 码是由日本丰田的子公司 Denso-Wave 在 1994 年创造。这个标准定义在[ISO/IEC 18004:2006](https://www.iso.org/standard/43655.html)中。它采用了免费许可证。

最小的 QR 码是 21x21 像素，最大的是 177x177。 大小又称为版本。21x21 像素大小是版本 1，25x25 是版本 2，依此类推。177x177 大小是版本 40，每个版本长宽各增加 4 个像素。所以版本和长宽的计算公司是：

```
width = height = 21 + (version-1) *4
```

此外，QR 码还包括容错级别：当您对 QR 码进行编码时，您还可以创建一些冗余数据，这样当 QR 码缺少了一部分时，它可以帮助 QR 识别器准确读取代码。这就是为什么有些二维码中间可以放个人头像，而有些二维码中间缺了一部分依然可以识别的原因。

有四个容错级别可以选择。分别是：

- L：最大 7%数据不可读
- M：最大 15%数据不可读
- Q：最大 25%数据不可读
- H：最大 30%数据不可读

当不可读数据在上面容错范围内时，二维码还是可以识别的。如果超出了容错范围，则不能识别。

QR 码的容量取决于版本和容错级别，以及您正在编码的数据类型。QR 码可以编码四种数据格式：数字，字母，8 位字节（二进制）或汉字(kanji:日文汉字，中文也可以)。最大的容量如下：

- 数字：7089 个
- 字母：4296 个
- 8 位字节（二进制）：2953 个
- 汉字：1817 个

## 生成 QR 码的步骤

1. 数据分析

QR 码可以编码一串文本。编码模式有四种:

- 数字模式：0-9
- 字母数字模式：0-9，大写字母(非小写)，符号\$,%,\*,+,-,/,.,:和空格。具体看[这里](https://www.thonky.com/qr-code-tutorial/alphanumeric-table)
- 字节模式：默认是 ISO-8859-1 字符集，但是有些 QR 识别器可以检测出里面的 UTF-8 字符。
- 汉字模式：是双字节字符，和 utf-8 相关。

有些二维码识别器在使用了字节模式下可以检测是否使用了 utf8 码，但是这些字符不能正确显示。为了解决这个问题，可以使用 ECI 模式

2. 数据编码

3. 纠错编码

4. 结构化最终信息

5. 将模块放在矩阵中

6. 掩码

7. 格式和版本信息
